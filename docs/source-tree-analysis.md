# Source Tree Analysis

**Project:** @turnkeystaffing/get-native-vue-auth
**Generated:** 2026-02-04
**Scan Level:** Quick

## Annotated Directory Tree

```
get-native-vue-auth/
├── src/                              # Source root (rootDir)
│   ├── index.ts                      # ★ ENTRY POINT - Barrel exports for entire library
│   ├── plugin.ts                     # Vue plugin installer (bffAuthPlugin, DEFAULT_ICONS)
│   ├── config.ts                     # Plugin config injection via Vue provide/inject
│   ├── shims-vue.d.ts                # Vue SFC type declarations
│   ├── test-setup.ts                 # Vitest global test setup
│   │
│   ├── components/                   # Pre-built Vuetify UI components for auth errors
│   │   ├── SessionExpiredModal.vue       # Modal shown when session expires
│   │   ├── PermissionDeniedToast.vue     # Toast notification for 403 errors
│   │   ├── ServiceUnavailableOverlay.vue # Full-screen overlay for service outages
│   │   └── __tests__/
│   │       ├── SessionExpiredModal.spec.ts
│   │       ├── PermissionDeniedToast.spec.ts
│   │       └── ServiceUnavailableOverlay.spec.ts
│   │
│   ├── composables/                  # Vue 3 Composition API composables
│   │   ├── useAuth.ts                    # Primary composable: isAuthenticated, login, logout, etc.
│   │   └── __tests__/
│   │       └── useAuth.spec.ts
│   │
│   ├── router/                       # Vue Router integration
│   │   ├── guards.ts                     # Auth guards (setupAuthGuard, createAuthGuard)
│   │   └── __tests__/
│   │       └── guards.spec.ts
│   │
│   ├── services/                     # Core auth service layer
│   │   ├── auth.ts                       # AuthService class: BFF HTTP calls (checkAuth, login, logout, etc.)
│   │   ├── interceptors.ts               # Axios interceptors: token injection, error handling
│   │   └── __tests__/
│   │       ├── auth.spec.ts
│   │       └── interceptors.spec.ts
│   │
│   ├── stores/                       # Pinia state management
│   │   ├── auth.ts                       # Auth store: state, actions (initAuth, ensureValidToken, etc.)
│   │   └── __tests__/
│   │       └── auth.spec.ts
│   │
│   ├── types/                        # TypeScript type definitions
│   │   ├── index.ts                      # Re-exports all types
│   │   ├── auth.ts                       # Auth domain types (UserInfo, AuthError, TokenResponse, etc.)
│   │   └── config.ts                     # Plugin config types (BffAuthPluginOptions, BffAuthConfig, AuthIcons)
│   │
│   └── utils/                        # Utility functions
│       ├── jwt.ts                        # JWT decode, email extraction, token decoding
│       └── __tests__/
│           └── jwt.spec.ts
│
├── dist/                             # Build output (gitignored, generated by vite build)
│   ├── index.js                      # Bundled ES module (~27KB)
│   └── index.d.ts                    # Rolled-up TypeScript declarations (~21KB)
│
├── package.json                      # Package manifest, peer deps, scripts
├── tsconfig.json                     # TypeScript configuration (ES2020, strict, bundler resolution)
├── vite.config.ts                    # Vite library build config, externalized peer deps
├── vitest.config.ts                  # Vitest config (jsdom environment, Vuetify inline)
├── yarn.lock                         # Yarn 4 lockfile
└── README.md                         # Usage documentation and API reference
```

## Critical Folders

| Folder | Purpose | Key Files |
|--------|---------|-----------|
| `src/` | All source code | `index.ts` (entry), `plugin.ts` (installer) |
| `src/services/` | Core BFF auth logic | `auth.ts` (HTTP calls), `interceptors.ts` (Axios) |
| `src/stores/` | State management | `auth.ts` (Pinia store) |
| `src/composables/` | Vue integration | `useAuth.ts` (composable) |
| `src/router/` | Route protection | `guards.ts` (auth guards) |
| `src/components/` | Error UI | 3 Vuetify components |
| `src/types/` | Type definitions | `auth.ts`, `config.ts` |
| `src/utils/` | Helpers | `jwt.ts` (token utilities) |
| `dist/` | Build output | `index.js`, `index.d.ts` |

## File Statistics

- **Source files:** 14 TypeScript + 3 Vue SFC = 17 files
- **Test files:** 8 spec files (co-located in `__tests__/` subdirectories)
- **Config files:** 4 (package.json, tsconfig.json, vite.config.ts, vitest.config.ts)
- **Build output:** 2 files (~48KB total)
